# Disclosure

import {
  DisclosureProvider,
  WithTransition,
  WithDisclosureControl,
  WithDisclosureContent,
} from "@atomic_ui_react/mod.ts";
import Playground from "~/components/playground.tsx";

The Disclosure is a button that visually controls a piece of content.

## Feature

- No DOM

  There is no actual DOM. It provides DOM Attributes by wrapping them around any component.

- SSR friendly

  By default, when a disclosure is closed, it does not remove the disclosure content from the DOM. This is important for SEO.

  Instead, it provides display: none as a style. This behavior is **completely controllable**.

export const BasicExample = () => {
  return (
    <div className="bg-white p-2 rounded-xl space-y-2">
      {contents.map(({ title, content }) => {
        return (
          <DisclosureProvider key={title}>
            <WithDisclosureControl>
              <button className="flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-purple-900 bg-purple-100 rounded-lg hover:bg-purple-200 focus:outline-none focus:ring focus:ring-purple-500 focus:ring-opacity-75">
                {title}
              </button>
            </WithDisclosureControl>
            <WithDisclosureContent>
              <p className="px-4 pb-2 text-sm text-gray-500">{content}</p>
            </WithDisclosureContent>
          </DisclosureProvider>
        );
      })}
    </div>
  );
};

export const contents = [
  {
    title: `What do I do if I have a permit for an assigned lot, but can't find a space there?`,
    content: `Park at the nearest available parking meter without paying the meter and call 999-999-9999 to report the problem. We will note and approve your alternate location and will investigate the cause of the shortage in your assigned facility.`,
  },
  {
    title: `What do I do if I lose my permit or if my permit is stolen?`,
    content: `You should come to the Parking office and report the loss. There is a fee to replace your lost permit. However, if your permit was stolen, a copy of a police report needs to be submitted along with a stolen parking permit form for a fee replacement exemption.`,
  },
];

## Quick View

<Playground preview={<BasicExample />}>

```ts
ff;
```

</Playground>

## DisclosureProvider

Render props as `children`.
Provides `id`, state, and dispatch required for disclosure.
Low layer API for complete control over rendering.

export const DisclosureProviderBasicExample = () => {
  return (
    <div className="bg-white p-2 rounded-xl space-y-2">
      {contents.map(({ title, content }) => (
        <DisclosureProvider key={title}>
          {({ isOpen, toggle, id }) => (
            <>
              <button
                aria-controls={id}
                aria-expanded={isOpen}
                onClick={toggle}
                className="flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-purple-900 bg-purple-100 rounded-lg hover:bg-purple-200 focus:outline-none focus:ring focus:ring-purple-500 focus:ring-opacity-75"
              >
                {title}
              </button>
              <p
                id={id}
                className={`px-4 pb-2 text-sm text-gray-500 ${
                  !isOpen && "hidden"
                }`}
              >
                {content}
              </p>
            </>
          )}
        </DisclosureProvider>
      ))}
    </div>
  );
};

<Playground preview={<DisclosureProviderBasicExample />}>

```tsx
import { DisclosureProvider } from "https://deno.land/x/atomic_ui_react@$VERSION/mod.ts"

export default = () => {
  return (
    <div className="bg-white p-2 rounded-xl space-y-2">
      {contents.map(({ title, content }) => (
        <DisclosureProvider key={title}>
          {({ isOpen, toggle, id }) => (
            <>
              <button
                aria-controls={id}
                aria-expanded={isOpen}
                onClick={toggle}
                className="flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-purple-900 bg-purple-100 rounded-lg hover:bg-purple-200 focus:outline-none focus:ring focus:ring-purple-500 focus:ring-opacity-75"
              >{title}</button>
              <p
                id={id}
                className={`px-4 pb-2 text-sm text-gray-500 ${
                  !isOpen && "hidden"
                }`}
              >
                {content}
              </p>
            </>
          )}
        </DisclosureProvider>
      ))}
    </div>
  );
}

const contents = [
  {
    title: `What do I do if I have a permit for an assigned lot, but can't find a space there?`,
    content: `Park at the nearest available parking meter without paying the meter and call 999-999-9999 to report the problem. We will note and approve your alternate location and will investigate the cause of the shortage in your assigned facility.`,
  },
  {
    title: `What do I do if I lose my permit or if my permit is stolen?`,
    content: `You should come to the Parking office and report the loss. There is a fee to replace your lost permit. However, if your permit was stolen, a copy of a police report needs to be submitted along with a stolen parking permit form for a fee replacement exemption.`,
  },
];
```

</Playground>

### with WithTransition

WithTransition can be used to achieve beautiful opening and closing movements.

export const DisclosureProviderWithWithTransitionExample = () => {
  return (
    <div className="bg-white p-2 rounded-xl space-y-2">
      {contents.map(({ title, content }) => (
        <DisclosureProvider key={title}>
          {({ isOpen, toggle, id }) => (
            <>
              <button
                aria-controls={id}
                aria-expanded={isOpen}
                onClick={toggle}
                className="flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-purple-900 bg-purple-100 rounded-lg hover:bg-purple-200 focus:outline-none focus:ring focus:ring-purple-500 focus:ring-opacity-75"
              >
                {title}
              </button>
              <WithTransition
                isShow={isOpen}
                enterFrom="opacity-0"
                enter="transition duration-300"
                leaveTo="opacity-0"
                leave="transition-all duration-300"
              >
                <p id={id} className={`px-4 pb-2 text-sm text-gray-500`}>
                  {content}
                </p>
              </WithTransition>
            </>
          )}
        </DisclosureProvider>
      ))}
    </div>
  );
};

<Playground preview={<DisclosureProviderWithWithTransitionExample />}>

```tsx
import { DisclosureProvider, WithTransition } from "https://deno.land/x/atomic_ui_react@$VERSION/mod.ts"

export default = () => {
  return (
    <div className="bg-white p-2 rounded-xl space-y-2">
      {contents.map(({ title, content }) => (
        <DisclosureProvider key={title}>
          {({ isOpen, toggle, id }) => (
            <>
              <button
                aria-controls={id}
                aria-expanded={isOpen}
                onClick={toggle}
                className="flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-purple-900 bg-purple-100 rounded-lg hover:bg-purple-200 focus:outline-none focus:ring focus:ring-purple-500 focus:ring-opacity-75"
              >
                {title}
              </button>
              <WithTransition
                isShow={isOpen}
                enterFrom="opacity-0"
                enter="transition duration-300"
                leaveTo="opacity-0"
                leave="transition-all duration-300"
              >
                <p id={id} className={`px-4 pb-2 text-sm text-gray-500`}>
                  {content}
                </p>
              </WithTransition>
            </>
          )}
        </DisclosureProvider>
      ))}
    </div>
  );
}
const contents = [
  {
    title: `What do I do if I have a permit for an assigned lot, but can't find a space there?`,
    content: `Park at the nearest available parking meter without paying the meter and call 999-999-9999 to report the problem. We will note and approve your alternate location and will investigate the cause of the shortage in your assigned facility.`,
  },
  {
    title: `What do I do if I lose my permit or if my permit is stolen?`,
    content: `You should come to the Parking office and report the loss. There is a fee to replace your lost permit. However, if your permit was stolen, a copy of a police report needs to be submitted along with a stolen parking permit form for a fee replacement exemption.`,
  },
];
```

</Playground>

## API

### DisclosureProvider

#### Props

| Name          | Required / Default | Description                                                            |
| ------------- | :----------------: | ---------------------------------------------------------------------- |
| children      | :white_check_mark: | `(context: Context) => JSX.Element`[^1]<br/> Render props as children. |
| isDefaultOpen |         -          | `boolean`<br/> Default state of `isOpen`                               |

[^1]: Types of `Context`

    | Name   | Description                                         |
    | ------ | --------------------------------------------------- |
    | id     | `string`<br />The global unique id for disclosure.  |
    | isOpen | `boolean`<br /> Whether disclosure is open or not.  |
    | open   | `() => void`<br /> Change `isOpen` state to `true`  |
    | close  | `() => void`<br /> Change `isOpen` state to `false` |
    | toggle | `() => void`<br/>Toggle `isOpen` state              |
